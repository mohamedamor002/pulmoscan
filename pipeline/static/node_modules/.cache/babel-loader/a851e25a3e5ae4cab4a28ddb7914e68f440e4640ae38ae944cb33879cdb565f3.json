{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth,ROLES,canManageAdmins,canManageDoctors}from'../contexts/AuthContext';import{useTheme}from'../contexts/ThemeContext';import axios from'axios';import{PlusIcon,PencilIcon,TrashIcon,ExclamationCircleIcon,ShieldCheckIcon,UserIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UsersPage=()=>{const[users,setUsers]=useState([]);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState(null);const[showCreateUserModal,setShowCreateUserModal]=useState(false);const[showEditUserModal,setShowEditUserModal]=useState(false);const[showDeleteUserModal,setShowDeleteUserModal]=useState(false);const[userToEdit,setUserToEdit]=useState(null);const[userToDelete,setUserToDelete]=useState(null);const{user:currentUser,canManageAdmins:userCanManageAdmins,canManageDoctors:userCanManageDoctors}=useAuth();const{darkMode}=useTheme();// Form states for creating and editing users\nconst[formUsername,setFormUsername]=useState('');const[formPassword,setFormPassword]=useState('');const[formRole,setFormRole]=useState(ROLES.DOCTOR);const[formFirstName,setFormFirstName]=useState('');const[formLastName,setFormLastName]=useState('');const[formEmail,setFormEmail]=useState('');const[formError,setFormError]=useState('');// Fetch users from the API\nconst fetchUsers=async()=>{try{setIsLoading(true);const response=await axios.get('/api/users');// Filter users based on role permissions\nlet filteredUsers=response.data;// If not a superadmin, filter out superadmins\nif(currentUser.role!==ROLES.SUPERADMIN){filteredUsers=filteredUsers.filter(user=>user.role!==ROLES.SUPERADMIN);}// If not an admin or superadmin, filter out admins too\nif(!userCanManageDoctors){filteredUsers=filteredUsers.filter(user=>user.role===ROLES.DOCTOR);}setUsers(filteredUsers);setIsLoading(false);}catch(error){console.error('Error fetching users:',error);setError('Failed to load users. Please try again later.');setIsLoading(false);}};useEffect(()=>{fetchUsers();},[currentUser.role]);// Check if current user can access the users page\nif(!userCanManageDoctors){return/*#__PURE__*/_jsx(\"div\",{className:`text-center py-12 ${darkMode?'text-white':''}`,children:/*#__PURE__*/_jsx(\"div\",{className:`${darkMode?'bg-red-900':'bg-red-50'} p-4 rounded-md inline-block`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(ExclamationCircleIcon,{className:`h-5 w-5 ${darkMode?'text-red-300':'text-red-400'}`}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:`text-sm font-medium ${darkMode?'text-red-300':'text-red-800'}`,children:\"Unauthorized Access\"}),/*#__PURE__*/_jsx(\"div\",{className:`mt-2 text-sm ${darkMode?'text-red-300':'text-red-700'}`,children:/*#__PURE__*/_jsx(\"p\",{children:\"You do not have permission to access this page. This page is only available to administrators.\"})})]})]})})});}// Create a new user\nconst handleCreateUser=async()=>{try{setFormError('');if(!formUsername||!formPassword){setFormError('Username and password are required.');return;}// Validate email format if provided\nif(formEmail&&!formEmail.includes('@')){setFormError('Please enter a valid email address.');return;}// Check permission for role creation\nif(formRole===ROLES.ADMIN&&!userCanManageAdmins){setFormError('You do not have permission to create admin users.');return;}if(formRole===ROLES.SUPERADMIN&&currentUser.role!==ROLES.SUPERADMIN){setFormError('Only super admins can create other super admins.');return;}const userData={username:formUsername,password:formPassword,role:formRole,first_name:formFirstName,last_name:formLastName,email:formEmail};const response=await axios.post('/api/users',userData);// Reset form and close modal\nsetFormUsername('');setFormPassword('');setFormRole(ROLES.DOCTOR);setFormFirstName('');setFormLastName('');setFormEmail('');setFormError('');setShowCreateUserModal(false);// Refresh users list\nfetchUsers();}catch(error){var _error$response,_error$response$data;console.error('Error creating user:',error);setFormError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Failed to create user. Please try again.');}};// Update an existing user\nconst handleUpdateUser=async()=>{try{setFormError('');const dataToUpdate={};if(formPassword){dataToUpdate.password=formPassword;}// Check if role is being changed\nif(formRole&&formRole!==userToEdit.role){// Verify permission for role change\nif(formRole===ROLES.ADMIN&&!userCanManageAdmins){setFormError('You do not have permission to promote users to admin.');return;}if(formRole===ROLES.SUPERADMIN&&currentUser.role!==ROLES.SUPERADMIN){setFormError('Only super admins can promote users to super admin.');return;}// Prevent downgrading superadmins if not a superadmin\nif(userToEdit.role===ROLES.SUPERADMIN&&currentUser.role!==ROLES.SUPERADMIN){setFormError('You cannot modify a super admin account.');return;}dataToUpdate.role=formRole;}if(formFirstName!==undefined){dataToUpdate.first_name=formFirstName;}if(formLastName!==undefined){dataToUpdate.last_name=formLastName;}if(formEmail!==undefined){// Validate email format if provided\nif(formEmail&&!formEmail.includes('@')){setFormError('Please enter a valid email address.');return;}dataToUpdate.email=formEmail;}if(Object.keys(dataToUpdate).length===0){setFormError('Please make at least one change.');return;}// Prevent modifying superadmin users if not a superadmin\nif(userToEdit.role===ROLES.SUPERADMIN&&currentUser.role!==ROLES.SUPERADMIN){setFormError('You do not have permission to modify super admin accounts.');return;}// Prevent admins from modifying other admins (only superadmins can)\nif(userToEdit.role===ROLES.ADMIN&&currentUser.role===ROLES.ADMIN){setFormError('Admins cannot modify other admin accounts.');return;}const response=await axios.put(`/api/users/${userToEdit.username}`,dataToUpdate);// Reset form and close modal\nsetFormPassword('');setFormRole(userToEdit.role);setFormFirstName('');setFormLastName('');setFormEmail('');setUserToEdit(null);setShowEditUserModal(false);// Refresh users list\nfetchUsers();}catch(error){var _error$response2,_error$response2$data;console.error('Error updating user:',error);setFormError(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Failed to update user. Please try again.');}};// Delete a user\nconst handleDeleteUser=async()=>{try{// Check permissions for role deletion\nif(userToDelete.role===ROLES.SUPERADMIN&&currentUser.role!==ROLES.SUPERADMIN){setError('You do not have permission to delete super admin accounts.');setShowDeleteUserModal(false);return;}// Prevent admins from deleting other admins (only superadmins can)\nif(userToDelete.role===ROLES.ADMIN&&currentUser.role===ROLES.ADMIN){setError('Admins cannot delete other admin accounts.');setShowDeleteUserModal(false);return;}// Prevent deleting your own account\nif(userToDelete.username===currentUser.username){setError('You cannot delete your own account.');setShowDeleteUserModal(false);return;}const response=await axios.delete(`/api/users/${userToDelete.username}`);// Reset and close modal\nsetUserToDelete(null);setShowDeleteUserModal(false);// Refresh users list\nfetchUsers();}catch(error){var _error$response3,_error$response3$data;console.error('Error deleting user:',error);setError(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||'Failed to delete user. Please try again.');}};// Open the edit user modal\nconst openEditUserModal=user=>{setUserToEdit(user);setFormUsername(user.username);setFormPassword('');// Don't prefill password for security\nsetFormRole(user.role);setFormFirstName(user.first_name||'');setFormLastName(user.last_name||'');setFormEmail(user.email||'');setFormError('');setShowEditUserModal(true);};// Open the delete user modal\nconst openDeleteUserModal=user=>{setUserToDelete(user);setShowDeleteUserModal(true);};return/*#__PURE__*/_jsxs(\"div\",{className:`space-y-6 ${darkMode?'text-white':''}`,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:`text-2xl font-semibold ${darkMode?'text-white':'text-gray-900'}`,children:\"User Management\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setFormUsername('');setFormPassword('');// Set default role based on user's permissions\nsetFormRole(userCanManageAdmins?ROLES.ADMIN:ROLES.DOCTOR);setFormFirstName('');setFormLastName('');setFormEmail('');setFormError('');setShowCreateUserModal(true);},className:`flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500`,children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-5 w-5 mr-1\"}),\"Add User\"]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:`${darkMode?'bg-red-900':'bg-red-50'} p-4 rounded-md`,children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(ExclamationCircleIcon,{className:`h-5 w-5 ${darkMode?'text-red-300':'text-red-400'}`}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-3\",children:/*#__PURE__*/_jsx(\"h3\",{className:`text-sm font-medium ${darkMode?'text-red-300':'text-red-800'}`,children:error})})]})}),isLoading?/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-indigo-600 border-r-transparent\"}),/*#__PURE__*/_jsx(\"p\",{className:`mt-4 ${darkMode?'text-gray-300':'text-gray-600'}`,children:\"Loading users...\"})]}):/*#__PURE__*/_jsx(\"div\",{className:`${darkMode?'bg-gray-800':'bg-white'} shadow overflow-hidden sm:rounded-md`,children:/*#__PURE__*/_jsx(\"ul\",{className:`divide-y ${darkMode?'divide-gray-700':'divide-gray-200'}`,children:users.length===0?/*#__PURE__*/_jsx(\"li\",{className:`px-6 py-4 text-center ${darkMode?'text-gray-300':'text-gray-500'}`,children:\"No users found.\"}):users.map(user=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"px-4 py-4 flex items-center sm:px-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex text-sm\",children:[/*#__PURE__*/_jsx(\"p\",{className:`font-medium ${darkMode?'text-indigo-300':'text-indigo-600'} truncate`,children:user.username}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-2 flex items-center\",children:[user.role===ROLES.SUPERADMIN&&/*#__PURE__*/_jsxs(\"span\",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${darkMode?'bg-purple-900 text-purple-100':'bg-purple-100 text-purple-800'}`,children:[/*#__PURE__*/_jsx(ShieldCheckIcon,{className:\"mr-1 h-3 w-3\"}),\"Super Admin\"]}),user.role===ROLES.ADMIN&&/*#__PURE__*/_jsxs(\"span\",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${darkMode?'bg-blue-900 text-blue-100':'bg-blue-100 text-blue-800'}`,children:[/*#__PURE__*/_jsx(ShieldCheckIcon,{className:\"mr-1 h-3 w-3\"}),\"Admin\"]}),user.role===ROLES.DOCTOR&&/*#__PURE__*/_jsxs(\"span\",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${darkMode?'bg-green-900 text-green-100':'bg-green-100 text-green-800'}`,children:[/*#__PURE__*/_jsx(UserIcon,{className:\"mr-1 h-3 w-3\"}),\"Doctor\"]})]}),user.username===currentUser.username&&/*#__PURE__*/_jsx(\"span\",{className:`ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${darkMode?'bg-yellow-900 text-yellow-100':'bg-yellow-100 text-yellow-800'}`,children:\"Current User\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:`mt-1 ${darkMode?'text-gray-300':'text-gray-500'}`,children:[user.first_name&&user.last_name?`${user.first_name} ${user.last_name}`:'',user.email&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2\",children:user.email})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 flex-shrink-0 sm:mt-0 sm:ml-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex -space-x-1 overflow-hidden\",children:[(user.role===ROLES.ADMIN&&userCanManageAdmins||user.role===ROLES.DOCTOR&&userCanManageDoctors||user.role===ROLES.SUPERADMIN&&currentUser.role===ROLES.SUPERADMIN)&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>openEditUserModal(user),className:`mr-2 inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded ${darkMode?'text-gray-300 bg-gray-700 hover:bg-gray-600 border-gray-600':'text-gray-700 bg-white hover:bg-gray-50'}`,children:[/*#__PURE__*/_jsx(PencilIcon,{className:\"-ml-0.5 mr-1 h-4 w-4\"}),\"Edit\"]}),(user.role===ROLES.ADMIN&&userCanManageAdmins||user.role===ROLES.DOCTOR&&userCanManageDoctors||user.role===ROLES.SUPERADMIN&&currentUser.role===ROLES.SUPERADMIN)&&user.username!==currentUser.username&&/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>openDeleteUserModal(user),className:`inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded ${darkMode?'text-red-300 bg-red-900 hover:bg-red-800':'text-white bg-red-600 hover:bg-red-700'}`,children:[/*#__PURE__*/_jsx(TrashIcon,{className:\"-ml-0.5 mr-1 h-4 w-4\"}),\"Delete\"]})]})})]})})},user.username))})}),showCreateUserModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed z-10 inset-0 overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 transition-opacity\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"div\",{className:`absolute inset-0 ${darkMode?'bg-gray-900':'bg-gray-500'} opacity-75`})}),/*#__PURE__*/_jsx(\"span\",{className:\"hidden sm:inline-block sm:align-middle sm:h-screen\",\"aria-hidden\":\"true\",children:\"\\u200B\"}),/*#__PURE__*/_jsxs(\"div\",{className:`inline-block align-bottom ${darkMode?'bg-gray-800':'bg-white'} rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full`,children:[/*#__PURE__*/_jsx(\"div\",{className:`${darkMode?'bg-gray-800':'bg-white'} px-4 pt-5 pb-4 sm:p-6 sm:pb-4`,children:/*#__PURE__*/_jsx(\"div\",{className:\"sm:flex sm:items-start\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full\",children:[/*#__PURE__*/_jsx(\"h3\",{className:`text-lg leading-6 font-medium ${darkMode?'text-white':'text-gray-900'}`,children:\"Create New User\"}),formError&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-500\",children:formError})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",className:`block text-sm font-medium ${darkMode?'text-gray-300':'text-gray-700'}`,children:\"Username *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",id:\"username\",value:formUsername,onChange:e=>setFormUsername(e.target.value),required:true,className:`mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md ${darkMode?'bg-gray-700 text-white border-gray-600':''}`})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:`block text-sm font-medium ${darkMode?'text-gray-300':'text-gray-700'}`,children:\"Password *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",id:\"password\",value:formPassword,onChange:e=>setFormPassword(e.target.value),required:true,className:`mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md ${darkMode?'bg-gray-700 text-white border-gray-600':''}`})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"role\",className:`block text-sm font-medium ${darkMode?'text-gray-300':'text-gray-700'}`,children:\"Role\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"role\",name:\"role\",value:formRole,onChange:e=>setFormRole(e.target.value),className:`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm ${darkMode?'bg-gray-700 text-white border-gray-600':''}`,children:[/*#__PURE__*/_jsx(\"option\",{value:ROLES.DOCTOR,children:\"Doctor\"}),userCanManageAdmins&&/*#__PURE__*/_jsx(\"option\",{value:ROLES.ADMIN,children:\"Admin\"}),currentUser.role===ROLES.SUPERADMIN&&/*#__PURE__*/_jsx(\"option\",{value:ROLES.SUPERADMIN,children:\"Super Admin\"})]})]})]})]})})}),/*#__PURE__*/_jsxs(\"div\",{className:`${darkMode?'bg-gray-800 border-t border-gray-700':'bg-gray-50 border-t border-gray-200'} px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse`,children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCreateUser,className:\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm\",children:\"Create\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowCreateUserModal(false),className:`mt-3 w-full inline-flex justify-center rounded-md border shadow-sm px-4 py-2 text-base font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm ${darkMode?'border-gray-600 bg-gray-700 text-gray-300 hover:bg-gray-600':'border-gray-300 bg-white text-gray-700 hover:bg-gray-50'}`,children:\"Cancel\"})]})]})]})}),showEditUserModal&&userToEdit&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 max-w-md w-full\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-semibold mb-4\",children:[\"Edit User: \",userToEdit.username]}),formError&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-4 bg-red-50 p-3 rounded-md\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-red-700\",children:formError})}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 sm:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"edit-first-name\",className:\"block text-sm font-medium text-gray-700\",children:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"edit-first-name\",name:\"first_name\",value:formFirstName,onChange:e=>setFormFirstName(e.target.value),className:\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"edit-last-name\",className:\"block text-sm font-medium text-gray-700\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"edit-last-name\",name:\"last_name\",value:formLastName,onChange:e=>setFormLastName(e.target.value),className:\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"edit-email\",className:\"block text-sm font-medium text-gray-700\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"edit-email\",name:\"email\",value:formEmail,onChange:e=>setFormEmail(e.target.value),className:\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"edit-password\",className:\"block text-sm font-medium text-gray-700\",children:\"New Password (leave blank to keep current)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"edit-password\",name:\"password\",value:formPassword,onChange:e=>setFormPassword(e.target.value),className:\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"edit-role\",className:\"block text-sm font-medium text-gray-700\",children:[\"Role \",userToEdit.username===currentUser.username&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:\"(cannot change your own role)\"})]}),/*#__PURE__*/_jsxs(\"select\",{id:\"edit-role\",name:\"role\",value:formRole,onChange:e=>setFormRole(e.target.value),disabled:userToEdit.username===currentUser.username,className:`mt-1 block w-full rounded-md shadow-sm sm:text-sm ${userToEdit.username===currentUser.username?'bg-gray-100 text-gray-500 border-gray-300 cursor-not-allowed':'border-gray-300 focus:border-indigo-500 focus:ring-indigo-500'}`,children:[/*#__PURE__*/_jsx(\"option\",{value:\"doctor\",children:\"Doctor\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-secondary\",onClick:()=>{setUserToEdit(null);setShowEditUserModal(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-primary\",onClick:handleUpdateUser,children:\"Update User\"})]})]})}),showDeleteUserModal&&userToDelete&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg p-6 max-w-md w-full\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Delete User\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-700 mb-4\",children:[\"Are you sure you want to delete the user \\\"\",userToDelete.username,\"\\\"? This action cannot be undone.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-secondary\",onClick:()=>{setUserToDelete(null);setShowDeleteUserModal(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-danger\",onClick:handleDeleteUser,children:\"Delete\"})]})]})})]});};export default UsersPage;","map":{"version":3,"names":["React","useState","useEffect","useAuth","ROLES","canManageAdmins","canManageDoctors","useTheme","axios","PlusIcon","PencilIcon","TrashIcon","ExclamationCircleIcon","ShieldCheckIcon","UserIcon","jsx","_jsx","jsxs","_jsxs","UsersPage","users","setUsers","isLoading","setIsLoading","error","setError","showCreateUserModal","setShowCreateUserModal","showEditUserModal","setShowEditUserModal","showDeleteUserModal","setShowDeleteUserModal","userToEdit","setUserToEdit","userToDelete","setUserToDelete","user","currentUser","userCanManageAdmins","userCanManageDoctors","darkMode","formUsername","setFormUsername","formPassword","setFormPassword","formRole","setFormRole","DOCTOR","formFirstName","setFormFirstName","formLastName","setFormLastName","formEmail","setFormEmail","formError","setFormError","fetchUsers","response","get","filteredUsers","data","role","SUPERADMIN","filter","console","className","children","handleCreateUser","includes","ADMIN","userData","username","password","first_name","last_name","email","post","_error$response","_error$response$data","handleUpdateUser","dataToUpdate","undefined","Object","keys","length","put","_error$response2","_error$response2$data","handleDeleteUser","delete","_error$response3","_error$response3$data","openEditUserModal","openDeleteUserModal","onClick","map","type","htmlFor","name","id","value","onChange","e","target","required","disabled"],"sources":["D:/Segmentation/pipeline/webapp/static/src/pages/UsersPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useAuth, ROLES, canManageAdmins, canManageDoctors } from '../contexts/AuthContext';\r\nimport { useTheme } from '../contexts/ThemeContext';\r\nimport axios from 'axios';\r\nimport { PlusIcon, PencilIcon, TrashIcon, ExclamationCircleIcon, ShieldCheckIcon, UserIcon } from '@heroicons/react/24/outline';\r\n\r\nconst UsersPage = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [showCreateUserModal, setShowCreateUserModal] = useState(false);\r\n  const [showEditUserModal, setShowEditUserModal] = useState(false);\r\n  const [showDeleteUserModal, setShowDeleteUserModal] = useState(false);\r\n  const [userToEdit, setUserToEdit] = useState(null);\r\n  const [userToDelete, setUserToDelete] = useState(null);\r\n  \r\n  const { user: currentUser, canManageAdmins: userCanManageAdmins, canManageDoctors: userCanManageDoctors } = useAuth();\r\n  const { darkMode } = useTheme();\r\n  \r\n  // Form states for creating and editing users\r\n  const [formUsername, setFormUsername] = useState('');\r\n  const [formPassword, setFormPassword] = useState('');\r\n  const [formRole, setFormRole] = useState(ROLES.DOCTOR);\r\n  const [formFirstName, setFormFirstName] = useState('');\r\n  const [formLastName, setFormLastName] = useState('');\r\n  const [formEmail, setFormEmail] = useState('');\r\n  const [formError, setFormError] = useState('');\r\n  \r\n  // Fetch users from the API\r\n  const fetchUsers = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      const response = await axios.get('/api/users');\r\n      \r\n      // Filter users based on role permissions\r\n      let filteredUsers = response.data;\r\n      \r\n      // If not a superadmin, filter out superadmins\r\n      if (currentUser.role !== ROLES.SUPERADMIN) {\r\n        filteredUsers = filteredUsers.filter(user => user.role !== ROLES.SUPERADMIN);\r\n      }\r\n      \r\n      // If not an admin or superadmin, filter out admins too\r\n      if (!userCanManageDoctors) {\r\n        filteredUsers = filteredUsers.filter(user => user.role === ROLES.DOCTOR);\r\n      }\r\n      \r\n      setUsers(filteredUsers);\r\n      setIsLoading(false);\r\n    } catch (error) {\r\n      console.error('Error fetching users:', error);\r\n      setError('Failed to load users. Please try again later.');\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  \r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, [currentUser.role]);\r\n  \r\n  // Check if current user can access the users page\r\n  if (!userCanManageDoctors) {\r\n    return (\r\n      <div className={`text-center py-12 ${darkMode ? 'text-white' : ''}`}>\r\n        <div className={`${darkMode ? 'bg-red-900' : 'bg-red-50'} p-4 rounded-md inline-block`}>\r\n          <div className=\"flex\">\r\n            <ExclamationCircleIcon className={`h-5 w-5 ${darkMode ? 'text-red-300' : 'text-red-400'}`} />\r\n            <div className=\"ml-3\">\r\n              <h3 className={`text-sm font-medium ${darkMode ? 'text-red-300' : 'text-red-800'}`}>Unauthorized Access</h3>\r\n              <div className={`mt-2 text-sm ${darkMode ? 'text-red-300' : 'text-red-700'}`}>\r\n                <p>You do not have permission to access this page. This page is only available to administrators.</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  // Create a new user\r\n  const handleCreateUser = async () => {\r\n    try {\r\n      setFormError('');\r\n      if (!formUsername || !formPassword) {\r\n        setFormError('Username and password are required.');\r\n        return;\r\n      }\r\n      \r\n      // Validate email format if provided\r\n      if (formEmail && !formEmail.includes('@')) {\r\n        setFormError('Please enter a valid email address.');\r\n        return;\r\n      }\r\n\r\n      // Check permission for role creation\r\n      if (formRole === ROLES.ADMIN && !userCanManageAdmins) {\r\n        setFormError('You do not have permission to create admin users.');\r\n        return;\r\n      }\r\n\r\n      if (formRole === ROLES.SUPERADMIN && currentUser.role !== ROLES.SUPERADMIN) {\r\n        setFormError('Only super admins can create other super admins.');\r\n        return;\r\n      }\r\n      \r\n      const userData = {\r\n        username: formUsername,\r\n        password: formPassword,\r\n        role: formRole,\r\n        first_name: formFirstName,\r\n        last_name: formLastName,\r\n        email: formEmail\r\n      };\r\n      \r\n      const response = await axios.post('/api/users', userData);\r\n      \r\n      // Reset form and close modal\r\n      setFormUsername('');\r\n      setFormPassword('');\r\n      setFormRole(ROLES.DOCTOR);\r\n      setFormFirstName('');\r\n      setFormLastName('');\r\n      setFormEmail('');\r\n      setFormError('');\r\n      setShowCreateUserModal(false);\r\n      \r\n      // Refresh users list\r\n      fetchUsers();\r\n    } catch (error) {\r\n      console.error('Error creating user:', error);\r\n      setFormError(error.response?.data?.error || 'Failed to create user. Please try again.');\r\n    }\r\n  };\r\n  \r\n  // Update an existing user\r\n  const handleUpdateUser = async () => {\r\n    try {\r\n      setFormError('');\r\n      \r\n      const dataToUpdate = {};\r\n      if (formPassword) {\r\n        dataToUpdate.password = formPassword;\r\n      }\r\n      \r\n      // Check if role is being changed\r\n      if (formRole && formRole !== userToEdit.role) {\r\n        // Verify permission for role change\r\n        if (formRole === ROLES.ADMIN && !userCanManageAdmins) {\r\n          setFormError('You do not have permission to promote users to admin.');\r\n          return;\r\n        }\r\n        \r\n        if (formRole === ROLES.SUPERADMIN && currentUser.role !== ROLES.SUPERADMIN) {\r\n          setFormError('Only super admins can promote users to super admin.');\r\n          return;\r\n        }\r\n        \r\n        // Prevent downgrading superadmins if not a superadmin\r\n        if (userToEdit.role === ROLES.SUPERADMIN && currentUser.role !== ROLES.SUPERADMIN) {\r\n          setFormError('You cannot modify a super admin account.');\r\n          return;\r\n        }\r\n        \r\n        dataToUpdate.role = formRole;\r\n      }\r\n      \r\n      if (formFirstName !== undefined) {\r\n        dataToUpdate.first_name = formFirstName;\r\n      }\r\n      if (formLastName !== undefined) {\r\n        dataToUpdate.last_name = formLastName;\r\n      }\r\n      if (formEmail !== undefined) {\r\n        // Validate email format if provided\r\n        if (formEmail && !formEmail.includes('@')) {\r\n          setFormError('Please enter a valid email address.');\r\n          return;\r\n        }\r\n        dataToUpdate.email = formEmail;\r\n      }\r\n      \r\n      if (Object.keys(dataToUpdate).length === 0) {\r\n        setFormError('Please make at least one change.');\r\n        return;\r\n      }\r\n      \r\n      // Prevent modifying superadmin users if not a superadmin\r\n      if (userToEdit.role === ROLES.SUPERADMIN && currentUser.role !== ROLES.SUPERADMIN) {\r\n        setFormError('You do not have permission to modify super admin accounts.');\r\n        return;\r\n      }\r\n      \r\n      // Prevent admins from modifying other admins (only superadmins can)\r\n      if (userToEdit.role === ROLES.ADMIN && currentUser.role === ROLES.ADMIN) {\r\n        setFormError('Admins cannot modify other admin accounts.');\r\n        return;\r\n      }\r\n      \r\n      const response = await axios.put(`/api/users/${userToEdit.username}`, dataToUpdate);\r\n      \r\n      // Reset form and close modal\r\n      setFormPassword('');\r\n      setFormRole(userToEdit.role);\r\n      setFormFirstName('');\r\n      setFormLastName('');\r\n      setFormEmail('');\r\n      setUserToEdit(null);\r\n      setShowEditUserModal(false);\r\n      \r\n      // Refresh users list\r\n      fetchUsers();\r\n    } catch (error) {\r\n      console.error('Error updating user:', error);\r\n      setFormError(error.response?.data?.error || 'Failed to update user. Please try again.');\r\n    }\r\n  };\r\n  \r\n  // Delete a user\r\n  const handleDeleteUser = async () => {\r\n    try {\r\n      // Check permissions for role deletion\r\n      if (userToDelete.role === ROLES.SUPERADMIN && currentUser.role !== ROLES.SUPERADMIN) {\r\n        setError('You do not have permission to delete super admin accounts.');\r\n        setShowDeleteUserModal(false);\r\n        return;\r\n      }\r\n      \r\n      // Prevent admins from deleting other admins (only superadmins can)\r\n      if (userToDelete.role === ROLES.ADMIN && currentUser.role === ROLES.ADMIN) {\r\n        setError('Admins cannot delete other admin accounts.');\r\n        setShowDeleteUserModal(false);\r\n        return;\r\n      }\r\n      \r\n      // Prevent deleting your own account\r\n      if (userToDelete.username === currentUser.username) {\r\n        setError('You cannot delete your own account.');\r\n        setShowDeleteUserModal(false);\r\n        return;\r\n      }\r\n      \r\n      const response = await axios.delete(`/api/users/${userToDelete.username}`);\r\n      \r\n      // Reset and close modal\r\n      setUserToDelete(null);\r\n      setShowDeleteUserModal(false);\r\n      \r\n      // Refresh users list\r\n      fetchUsers();\r\n    } catch (error) {\r\n      console.error('Error deleting user:', error);\r\n      setError(error.response?.data?.error || 'Failed to delete user. Please try again.');\r\n    }\r\n  };\r\n  \r\n  // Open the edit user modal\r\n  const openEditUserModal = (user) => {\r\n    setUserToEdit(user);\r\n    setFormUsername(user.username);\r\n    setFormPassword(''); // Don't prefill password for security\r\n    setFormRole(user.role);\r\n    setFormFirstName(user.first_name || '');\r\n    setFormLastName(user.last_name || '');\r\n    setFormEmail(user.email || '');\r\n    setFormError('');\r\n    setShowEditUserModal(true);\r\n  };\r\n  \r\n  // Open the delete user modal\r\n  const openDeleteUserModal = (user) => {\r\n    setUserToDelete(user);\r\n    setShowDeleteUserModal(true);\r\n  };\r\n\r\n  return (\r\n    <div className={`space-y-6 ${darkMode ? 'text-white' : ''}`}>\r\n      <div className=\"flex justify-between items-center\">\r\n        <h1 className={`text-2xl font-semibold ${darkMode ? 'text-white' : 'text-gray-900'}`}>User Management</h1>\r\n        <button \r\n          onClick={() => {\r\n            setFormUsername('');\r\n            setFormPassword('');\r\n            // Set default role based on user's permissions\r\n            setFormRole(userCanManageAdmins ? ROLES.ADMIN : ROLES.DOCTOR);\r\n            setFormFirstName('');\r\n            setFormLastName('');\r\n            setFormEmail('');\r\n            setFormError('');\r\n            setShowCreateUserModal(true);\r\n          }}\r\n          className={`flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500`}\r\n        >\r\n          <PlusIcon className=\"h-5 w-5 mr-1\" />\r\n          Add User\r\n        </button>\r\n      </div>\r\n\r\n      {error && (\r\n        <div className={`${darkMode ? 'bg-red-900' : 'bg-red-50'} p-4 rounded-md`}>\r\n          <div className=\"flex\">\r\n            <ExclamationCircleIcon className={`h-5 w-5 ${darkMode ? 'text-red-300' : 'text-red-400'}`} />\r\n            <div className=\"ml-3\">\r\n              <h3 className={`text-sm font-medium ${darkMode ? 'text-red-300' : 'text-red-800'}`}>{error}</h3>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {isLoading ? (\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-indigo-600 border-r-transparent\"></div>\r\n          <p className={`mt-4 ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>Loading users...</p>\r\n        </div>\r\n      ) : (\r\n        <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} shadow overflow-hidden sm:rounded-md`}>\r\n          <ul className={`divide-y ${darkMode ? 'divide-gray-700' : 'divide-gray-200'}`}>\r\n            {users.length === 0 ? (\r\n              <li className={`px-6 py-4 text-center ${darkMode ? 'text-gray-300' : 'text-gray-500'}`}>\r\n                No users found.\r\n              </li>\r\n            ) : (\r\n              users.map((user) => (\r\n                <li key={user.username}>\r\n                  <div className=\"px-4 py-4 flex items-center sm:px-6\">\r\n                    <div className=\"min-w-0 flex-1 sm:flex sm:items-center sm:justify-between\">\r\n                      <div>\r\n                        <div className=\"flex text-sm\">\r\n                          <p className={`font-medium ${darkMode ? 'text-indigo-300' : 'text-indigo-600'} truncate`}>\r\n                            {user.username}\r\n                          </p>\r\n                          <div className=\"ml-2 flex items-center\">\r\n                            {user.role === ROLES.SUPERADMIN && (\r\n                              <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${darkMode ? 'bg-purple-900 text-purple-100' : 'bg-purple-100 text-purple-800'}`}>\r\n                                <ShieldCheckIcon className=\"mr-1 h-3 w-3\" />\r\n                                Super Admin\r\n                              </span>\r\n                            )}\r\n                            {user.role === ROLES.ADMIN && (\r\n                              <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${darkMode ? 'bg-blue-900 text-blue-100' : 'bg-blue-100 text-blue-800'}`}>\r\n                                <ShieldCheckIcon className=\"mr-1 h-3 w-3\" />\r\n                                Admin\r\n                              </span>\r\n                            )}\r\n                            {user.role === ROLES.DOCTOR && (\r\n                              <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${darkMode ? 'bg-green-900 text-green-100' : 'bg-green-100 text-green-800'}`}>\r\n                                <UserIcon className=\"mr-1 h-3 w-3\" />\r\n                                Doctor\r\n                              </span>\r\n                            )}\r\n                          </div>\r\n                          {user.username === currentUser.username && (\r\n                            <span className={`ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${darkMode ? 'bg-yellow-900 text-yellow-100' : 'bg-yellow-100 text-yellow-800'}`}>\r\n                              Current User\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                        <div className={`mt-1 ${darkMode ? 'text-gray-300' : 'text-gray-500'}`}>\r\n                          {user.first_name && user.last_name \r\n                            ? `${user.first_name} ${user.last_name}`\r\n                            : ''}\r\n                          {user.email && (\r\n                            <span className=\"ml-2\">\r\n                              {user.email}\r\n                            </span>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"mt-4 flex-shrink-0 sm:mt-0 sm:ml-5\">\r\n                        <div className=\"flex -space-x-1 overflow-hidden\">\r\n                          {/* Only show edit button if user has permission */}\r\n                          {((user.role === ROLES.ADMIN && userCanManageAdmins) || \r\n                             (user.role === ROLES.DOCTOR && userCanManageDoctors) ||\r\n                             (user.role === ROLES.SUPERADMIN && currentUser.role === ROLES.SUPERADMIN)) && (\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => openEditUserModal(user)}\r\n                              className={`mr-2 inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded ${\r\n                                darkMode \r\n                                  ? 'text-gray-300 bg-gray-700 hover:bg-gray-600 border-gray-600' \r\n                                  : 'text-gray-700 bg-white hover:bg-gray-50'\r\n                              }`}\r\n                            >\r\n                              <PencilIcon className=\"-ml-0.5 mr-1 h-4 w-4\" />\r\n                              Edit\r\n                            </button>\r\n                          )}\r\n                          \r\n                          {/* Only show delete button if user has permission */}\r\n                          {((user.role === ROLES.ADMIN && userCanManageAdmins) || \r\n                             (user.role === ROLES.DOCTOR && userCanManageDoctors) ||\r\n                             (user.role === ROLES.SUPERADMIN && currentUser.role === ROLES.SUPERADMIN)) && \r\n                            user.username !== currentUser.username && (\r\n                            <button\r\n                              type=\"button\"\r\n                              onClick={() => openDeleteUserModal(user)}\r\n                              className={`inline-flex items-center px-2.5 py-1.5 border border-transparent text-xs font-medium rounded ${\r\n                                darkMode \r\n                                  ? 'text-red-300 bg-red-900 hover:bg-red-800' \r\n                                  : 'text-white bg-red-600 hover:bg-red-700'\r\n                              }`}\r\n                            >\r\n                              <TrashIcon className=\"-ml-0.5 mr-1 h-4 w-4\" />\r\n                              Delete\r\n                            </button>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </li>\r\n              ))\r\n            )}\r\n          </ul>\r\n        </div>\r\n      )}\r\n\r\n      {/* Create User Modal - Update this to allow proper role selection based on permissions */}\r\n      {showCreateUserModal && (\r\n        <div className=\"fixed z-10 inset-0 overflow-y-auto\">\r\n          <div className=\"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\r\n            <div className=\"fixed inset-0 transition-opacity\" aria-hidden=\"true\">\r\n              <div className={`absolute inset-0 ${darkMode ? 'bg-gray-900' : 'bg-gray-500'} opacity-75`}></div>\r\n            </div>\r\n            \r\n            <span className=\"hidden sm:inline-block sm:align-middle sm:h-screen\" aria-hidden=\"true\">&#8203;</span>\r\n            \r\n            <div className={`inline-block align-bottom ${darkMode ? 'bg-gray-800' : 'bg-white'} rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full`}>\r\n              <div className={`${darkMode ? 'bg-gray-800' : 'bg-white'} px-4 pt-5 pb-4 sm:p-6 sm:pb-4`}>\r\n                <div className=\"sm:flex sm:items-start\">\r\n                  <div className=\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full\">\r\n                    <h3 className={`text-lg leading-6 font-medium ${darkMode ? 'text-white' : 'text-gray-900'}`}>\r\n                      Create New User\r\n                    </h3>\r\n                    \r\n                    {formError && (\r\n                      <div className=\"mt-2\">\r\n                        <p className=\"text-sm text-red-500\">{formError}</p>\r\n                      </div>\r\n                    )}\r\n                    \r\n                    <div className=\"mt-4 space-y-4\">\r\n                      <div>\r\n                        <label htmlFor=\"username\" className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                          Username *\r\n                        </label>\r\n                        <input\r\n                          type=\"text\"\r\n                          name=\"username\"\r\n                          id=\"username\"\r\n                          value={formUsername}\r\n                          onChange={(e) => setFormUsername(e.target.value)}\r\n                          required\r\n                          className={`mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md ${\r\n                            darkMode ? 'bg-gray-700 text-white border-gray-600' : ''\r\n                          }`}\r\n                        />\r\n                      </div>\r\n                      \r\n                      <div>\r\n                        <label htmlFor=\"password\" className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                          Password *\r\n                        </label>\r\n                        <input\r\n                          type=\"password\"\r\n                          name=\"password\"\r\n                          id=\"password\"\r\n                          value={formPassword}\r\n                          onChange={(e) => setFormPassword(e.target.value)}\r\n                          required\r\n                          className={`mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md ${\r\n                            darkMode ? 'bg-gray-700 text-white border-gray-600' : ''\r\n                          }`}\r\n                        />\r\n                      </div>\r\n                      \r\n                      <div>\r\n                        <label htmlFor=\"role\" className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'}`}>\r\n                          Role\r\n                        </label>\r\n                        <select\r\n                          id=\"role\"\r\n                          name=\"role\"\r\n                          value={formRole}\r\n                          onChange={(e) => setFormRole(e.target.value)}\r\n                          className={`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm ${\r\n                            darkMode ? 'bg-gray-700 text-white border-gray-600' : ''\r\n                          }`}\r\n                        >\r\n                          <option value={ROLES.DOCTOR}>Doctor</option>\r\n                          {userCanManageAdmins && <option value={ROLES.ADMIN}>Admin</option>}\r\n                          {currentUser.role === ROLES.SUPERADMIN && <option value={ROLES.SUPERADMIN}>Super Admin</option>}\r\n                        </select>\r\n                      </div>\r\n                      \r\n                      {/* Add the rest of the form fields */}\r\n                      \r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className={`${darkMode ? 'bg-gray-800 border-t border-gray-700' : 'bg-gray-50 border-t border-gray-200'} px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse`}>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleCreateUser}\r\n                  className=\"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm\"\r\n                >\r\n                  Create\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => setShowCreateUserModal(false)}\r\n                  className={`mt-3 w-full inline-flex justify-center rounded-md border shadow-sm px-4 py-2 text-base font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm ${\r\n                    darkMode \r\n                      ? 'border-gray-600 bg-gray-700 text-gray-300 hover:bg-gray-600' \r\n                      : 'border-gray-300 bg-white text-gray-700 hover:bg-gray-50'\r\n                  }`}\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Edit User Modal - The modal should support dark mode and respect role permissions */}\r\n      {showEditUserModal && userToEdit && (\r\n        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full\">\r\n            <h2 className=\"text-xl font-semibold mb-4\">Edit User: {userToEdit.username}</h2>\r\n            \r\n            {formError && (\r\n              <div className=\"mb-4 bg-red-50 p-3 rounded-md\">\r\n                <p className=\"text-sm text-red-700\">{formError}</p>\r\n              </div>\r\n            )}\r\n            \r\n            <div className=\"space-y-4\">\r\n              <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n                <div>\r\n                  <label htmlFor=\"edit-first-name\" className=\"block text-sm font-medium text-gray-700\">\r\n                    First Name\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"edit-first-name\"\r\n                    name=\"first_name\"\r\n                    value={formFirstName}\r\n                    onChange={(e) => setFormFirstName(e.target.value)}\r\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                  />\r\n                </div>\r\n                \r\n                <div>\r\n                  <label htmlFor=\"edit-last-name\" className=\"block text-sm font-medium text-gray-700\">\r\n                    Last Name\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"edit-last-name\"\r\n                    name=\"last_name\"\r\n                    value={formLastName}\r\n                    onChange={(e) => setFormLastName(e.target.value)}\r\n                    className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              <div>\r\n                <label htmlFor=\"edit-email\" className=\"block text-sm font-medium text-gray-700\">\r\n                  Email\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  id=\"edit-email\"\r\n                  name=\"email\"\r\n                  value={formEmail}\r\n                  onChange={(e) => setFormEmail(e.target.value)}\r\n                  className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                />\r\n              </div>\r\n              \r\n              <div>\r\n                <label htmlFor=\"edit-password\" className=\"block text-sm font-medium text-gray-700\">\r\n                  New Password (leave blank to keep current)\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  id=\"edit-password\"\r\n                  name=\"password\"\r\n                  value={formPassword}\r\n                  onChange={(e) => setFormPassword(e.target.value)}\r\n                  className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm\"\r\n                />\r\n              </div>\r\n              \r\n              <div>\r\n                <label htmlFor=\"edit-role\" className=\"block text-sm font-medium text-gray-700\">\r\n                  Role {userToEdit.username === currentUser.username && \r\n                    <span className=\"text-xs text-gray-500\">(cannot change your own role)</span>}\r\n                </label>\r\n                <select\r\n                  id=\"edit-role\"\r\n                  name=\"role\"\r\n                  value={formRole}\r\n                  onChange={(e) => setFormRole(e.target.value)}\r\n                  disabled={userToEdit.username === currentUser.username}\r\n                  className={`mt-1 block w-full rounded-md shadow-sm sm:text-sm ${\r\n                    userToEdit.username === currentUser.username\r\n                      ? 'bg-gray-100 text-gray-500 border-gray-300 cursor-not-allowed'\r\n                      : 'border-gray-300 focus:border-indigo-500 focus:ring-indigo-500'\r\n                  }`}\r\n                >\r\n                  <option value=\"doctor\">Doctor</option>\r\n                  <option value=\"admin\">Admin</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className=\"mt-6 flex justify-end space-x-3\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-secondary\"\r\n                onClick={() => {\r\n                  setUserToEdit(null);\r\n                  setShowEditUserModal(false);\r\n                }}\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-primary\"\r\n                onClick={handleUpdateUser}\r\n              >\r\n                Update User\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Delete User Confirmation Modal */}\r\n      {showDeleteUserModal && userToDelete && (\r\n        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg p-6 max-w-md w-full\">\r\n            <h2 className=\"text-xl font-semibold mb-4\">Delete User</h2>\r\n            \r\n            <p className=\"text-gray-700 mb-4\">\r\n              Are you sure you want to delete the user \"{userToDelete.username}\"? \r\n              This action cannot be undone.\r\n            </p>\r\n            \r\n            <div className=\"mt-6 flex justify-end space-x-3\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-secondary\"\r\n                onClick={() => {\r\n                  setUserToDelete(null);\r\n                  setShowDeleteUserModal(false);\r\n                }}\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn-danger\"\r\n                onClick={handleDeleteUser}\r\n              >\r\n                Delete\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UsersPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}